<div class="wrapper">

  <h1>Create IELTS Test</h1>

  <!-- BASIC INFO -->
  <div class="card">
    <input placeholder="Test Name" [(ngModel)]="test.name">

    <div class="row">
      <input type="number" placeholder="Total Marks" [(ngModel)]="test.totalMarks">
      <input type="number" placeholder="Passing Marks" [(ngModel)]="test.passingMarks">
      <input type="number" placeholder="Duration (minutes)" [(ngModel)]="test.duration">
    </div>

    <select [(ngModel)]="test.type">
      <option value="">Select Test Type</option>
      <option value="LISTENING">Listening</option>
      <option value="READING">Reading</option>
      <option value="WRITING">Writing</option>
      <option value="SPEAKING">Speaking</option>
    </select>
  </div>

  <!-- LISTENING -->
  <div *ngIf="test.type==='LISTENING'" class="card">
    <h2>Listening Test (4 Sections)</h2>

    <div *ngFor="let rec of listening.recordings; let i=index" class="inner-card">
      <h3>Recording {{ i + 1 }}</h3>
      <input placeholder="Audio file name" [(ngModel)]="rec.audio">

      <div *ngFor="let q of rec.questions; let qi=index" class="question">
        <input placeholder="Question" [(ngModel)]="q.q">
        <button (click)="removeQuestion(rec.questions, qi)">‚ùå</button>
      </div>

      <button (click)="addQuestion(rec.questions)">+ Add Question</button>
    </div>
  </div>

  <!-- READING -->
  <div *ngIf="test.type==='READING'" class="card">
    <h2>Reading Test (3 Passages)</h2>

    <div *ngFor="let p of reading; let i=index" class="inner-card">
      <h3>Passage {{ i + 1 }}</h3>
      <textarea placeholder="Reading passage" [(ngModel)]="p.passage"></textarea>

      <div *ngFor="let q of p.questions; let qi=index" class="question">
        <input placeholder="Question" [(ngModel)]="q.q">
        <input placeholder="Answer" [(ngModel)]="q.answer">
      </div>
    </div>
  </div>

  <!-- WRITING -->
  <div *ngIf="test.type==='WRITING'" class="card">
    <h2>Writing Test</h2>
    <textarea placeholder="Task 1 Question" [(ngModel)]="writing.task1"></textarea>
    <textarea placeholder="Task 2 Essay Question" [(ngModel)]="writing.task2"></textarea>
  </div>

  <!-- SPEAKING -->
  <div *ngIf="test.type==='SPEAKING'" class="card">
    <h2>Speaking Test</h2>

    <h3>Part 1</h3>
    <div *ngFor="let q of speaking.part1; let i=index" class="question">
      <input placeholder="Question" [(ngModel)]="q.q">
    </div>

    <h3>Part 2</h3>
    <textarea placeholder="Cue card topic" [(ngModel)]="speaking.part2"></textarea>

    <h3>Part 3</h3>
    <div *ngFor="let q of speaking.part3; let i=index" class="question">
      <input placeholder="Question" [(ngModel)]="q.q">
    </div>
  </div>

  <button class="save"
        [disabled]="!isFormComplete()"
        (click)="saveTest()">
  Save Test
</button>

</div>
