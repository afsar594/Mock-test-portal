<div class="wrapper" *ngIf="test">

  <h2>{{ test.name }}</h2>

  <div class="meta">
    <p><b>Type:</b> {{ test.type }}</p>
    <p><b>Total Marks:</b> {{ test.totalMarks }}</p>
    <p><b>Passing Marks:</b> {{ test.passingMarks }}</p>
    <p><b>Duration:</b> {{ test.duration }} mins</p>
    <p><b>Status:</b> {{ test.status }}</p>
  </div>

  <!-- ================= LISTENING ================= -->
  <div *ngIf="test.type === 'LISTENING'">
    <h3>Listening Test</h3>

    <div *ngFor="let rec of test.content.recordings; let i=index" class="box">
      <h4>Section {{ i + 1 }}</h4>

      <div *ngFor="let q of rec.questions">
        <input [(ngModel)]="q.q" placeholder="Listening Question" />
      </div>

      <button (click)="addListeningQuestion(i)">+ Add Question</button>
    </div>
  </div>

  <!-- ================= READING ================= -->
  <div *ngIf="test.type === 'READING'">
    <h3>Reading Test</h3>

    <div *ngFor="let p of test.content; let i=index" class="box">
      <textarea [(ngModel)]="p.passage" placeholder="Reading Passage"></textarea>

      <div *ngFor="let q of p.questions">
        <input [(ngModel)]="q.q" placeholder="Question" />
        <input [(ngModel)]="q.answer" placeholder="Answer" />
      </div>

      <button (click)="addReadingQuestion(i)">+ Add Question</button>
    </div>
  </div>

  <!-- ================= WRITING ================= -->
  <div *ngIf="test.type === 'WRITING'">
    <h3>Writing Test</h3>

    <textarea [(ngModel)]="test.content.task1" placeholder="Task 1 Question"></textarea>
    <textarea [(ngModel)]="test.content.task2" placeholder="Task 2 Essay"></textarea>
  </div>

  <!-- ================= SPEAKING ================= -->
  <div *ngIf="test.type === 'SPEAKING'">
    <h3>Speaking Test</h3>

    <h4>Part 1</h4>
    <div *ngFor="let q of test.content.part1">
      <input [(ngModel)]="q.q" placeholder="Question" />
    </div>
    <button (click)="addSpeakingQuestion('part1')">+ Add Question</button>

    <h4>Part 2</h4>
    <textarea [(ngModel)]="test.content.part2" placeholder="Cue Card Topic"></textarea>

    <h4>Part 3</h4>
    <div *ngFor="let q of test.content.part3">
      <input [(ngModel)]="q.q" placeholder="Question" />
    </div>
    <button (click)="addSpeakingQuestion('part3')">+ Add Question</button>
  </div>

</div>
